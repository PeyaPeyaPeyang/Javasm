<!-- Instructions: multianewarray -->
<div class="definition">
    <h2>Multidimensional Array Creation Instruction</h2>
    <p><b>{link:multianewarray}</b> - <code>0xc5</code> (197)</p>

    <h4>Purpose</h4>
    <p>
        Creates a new multidimensional array of references or primitive types. The dimensions of the array are specified
        by values popped from the operand stack.
    </p>

    <h5><b>Operands:</b></h5>
    <ul>
        <li><code>TypeDescriptor</code>: Specifies the type of the array and its dimensions. The format is <code>[...Type</code>,
            where each <code>[</code> represents one dimension, and <code>Type</code> is the type of the array elements.
            For example:
            <ul>
                <li><code>[[I</code>: A 2-dimensional array of <code>int</code>.</li>
                <li><code>[Ljava/lang/String;</code>: A 1-dimensional array of <code>String</code>.</li>
            </ul>
        </li>
        <li><code>dimensions</code>: The number of dimensions to initialize. This is an immediate operand.</li>
    </ul>

    <h5><b>Format:</b></h5>
    <p><code>multianewarray &lt;TypeDescriptor&gt; &lt;dimensions&gt;</code></p>

    <h5><b>Examples:</b></h5>
    <ul>
        <li><code>multianewarray [[I 2</code> (creates a 2-dimensional array of <code>int</code>)</li>
        <li><code>multianewarray [Ljava/lang/String; 1</code> (creates a 1-dimensional array of <code>String</code>)
        </li>
    </ul>

    <h5><b>TypeDescriptor:</b></h5>
    <p>
        The <code>TypeDescriptor</code> specifies the type and structure of the array. It must represent a valid Java
        type:
    </p>
    <ul>
        <li><code>[</code>: Indicates an array type. Each <code>[</code> adds a dimension to the array.</li>
        <li><code>I</code>: <code>int</code></li>
        <li><code>J</code>: <code>long</code></li>
        <li><code>F</code>: <code>float</code></li>
        <li><code>D</code>: <code>double</code></li>
        <li><code>Z</code>: <code>boolean</code></li>
        <li><code>B</code>: <code>byte</code></li>
        <li><code>C</code>: <code>char</code></li>
        <li><code>S</code>: <code>short</code></li>
        <li><code>L&lt;classname&gt;;</code>: A reference type (e.g., <code>Ljava/lang/String;</code>)</li>
    </ul>

    <h5><b>Stack Effect:</b></h5>
    <p>
        The operand stack must contain the sizes of the dimensions to initialize, in order from the outermost to the
        innermost dimension. For example, for a 3-dimensional array, the stack must contain the sizes for dimensions 1,
        2, and 3.
    </p>
    <ul>
        <li>Before: <code>..., size1, size2, ..., sizeN</code> (where <code>N</code> is the number of dimensions)</li>
        <li>After: <code>..., arrayref</code> (a reference to the newly created multidimensional array)</li>
    </ul>

    <p>If any size is negative, a <code>NegativeArraySizeException</code> is thrown.</p>
</div>

